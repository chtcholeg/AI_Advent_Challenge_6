# Changelog: Day 7 -> Day 8

## Summary

Day 8 brings UI/UX improvements:
1. Enhanced token display with descriptive labels
2. Current model name displayed in the header
3. Response trimming to remove whitespace

## Changes

### 1. Enhanced Token Display Labels

**File:** `composeApp/src/commonMain/kotlin/ru/chtcholeg/app/presentation/components/MessageItem.kt`

**Before (Day 7):**
```
156 tokens (42+114)
```

**After (Day 8):**
```
156 tokens (↑42 + ↓114)
```

Where:
- ↑ = prompt tokens (input, to model)
- ↓ = completion tokens (output, from model)

**Code Change:**
```kotlin
// Before
append(" (${message.promptTokens}+${message.completionTokens})")

// After
append(" (↑${message.promptTokens} + ↓${message.completionTokens})")
```

### 2. Model Name Display in Header

**Files:**
- `ChatState.kt` - Added `currentModelName` field
- `ChatStore.kt` - Updates model name from settings
- `ChatScreen.kt` - Displays model name under "AI Chat" title

The TopAppBar now shows:
```
AI Chat
GigaChat Pro    <- current model name (smaller, semi-transparent)
```

**Code Changes:**

`ChatState.kt`:
```kotlin
data class ChatState(
    val messages: List<ChatMessage> = emptyList(),
    val isLoading: Boolean = false,
    val error: String? = null,
    val currentModelName: String = ""  // NEW
)
```

`ChatStore.kt`:
```kotlin
settingsRepository.settings.collect { settings ->
    handleResponseModeChange(settings.responseMode)
    // Update current model name
    val model = Model.fromId(settings.model) ?: Model.GigaChat
    _state.update { it.copy(currentModelName = model.displayName) }
}
```

### 3. Response Trimming

**File:** `composeApp/src/commonMain/kotlin/ru/chtcholeg/app/data/repository/ChatRepositoryImpl.kt`

AI responses are now trimmed to remove leading/trailing whitespace:

```kotlin
// Both sendMessage() and sendMessageWithCustomSystemPrompt() now use:
content = aiMessage.content.trim()
```

### 4. Documentation Updates

**Files Updated:**
- `README.md` - Updated for Day 8, new feature description
- `CLAUDE.md` - Added day-08 feature description

**Files Removed:**
- `MODELS.md` - Not relevant for this day
- `TEMPERATURE_EXPERIMENT_RESULTS.md` - Not relevant for this day
- `DIFF_06-07.md` - Replaced with this file

## Benefits of This Change

1. **Clarity**: Users immediately understand what each number represents without needing to remember the order
2. **Learning**: Helps users learn the distinction between prompt tokens (input) and completion tokens (output)
3. **Debugging**: Easier to identify if prompts are too long or if responses are being truncated due to token limits
4. **Accessibility**: More descriptive labels improve usability for all users

## Token Types Explained

- **Prompt Tokens**: The tokens used by your input message, conversation history, and system prompt
- **Completion Tokens**: The tokens used by the AI's response
- **Total Tokens**: Sum of prompt + completion tokens (affects API billing)

## Migration Notes

This is a purely cosmetic change with no impact on:
- API calls
- Data models
- Application logic
- Build configuration

No migration steps required.
